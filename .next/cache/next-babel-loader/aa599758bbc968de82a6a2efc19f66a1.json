{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Container, Grid } from \"@material-ui/core\";\nimport NewsCard from \"./NewsCard\";\nimport { useInView } from 'react-intersection-observer';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useState } from \"react\";\nimport useCookie from 'react-use-cookie';\n\nvar LikedNews = function LikedNews() {\n  var _useInView = useInView({\n    threshold: 0\n  }),\n      ref = _useInView.ref,\n      inView = _useInView.inView;\n\n  var _useState = useState([]),\n      likedNews = _useState[0],\n      setLikedNews = _useState[1];\n\n  var _useCookie = useCookie('likedPosts'),\n      _useCookie2 = _slicedToArray(_useCookie, 2),\n      posts = _useCookie2[0],\n      setPosts = _useCookie2[1];\n\n  var _useState2 = useState(false),\n      load = _useState2[0],\n      setLoad = _useState2[1];\n\n  var page = 0;\n  var cookiePosts = JSON.parse(posts);\n\n  if (inView) {\n    loadData();\n  }\n\n  var loadData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var currentPosts, response, json;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (load) {\n                _context.next = 11;\n                break;\n              }\n\n              setLoad(true);\n              currentPosts = cookiePosts.slice(page * 10, page * 10 + 10);\n              _context.next = 5;\n              return fetch('/api/news/likedNews', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json;charset=utf-8'\n                },\n                body: JSON.stringify(currentPosts)\n              });\n\n            case 5:\n              response = _context.sent;\n              _context.next = 8;\n              return response.json();\n\n            case 8:\n              json = _context.sent;\n              setPosts(function (posts) {\n                return setPosts([].concat(_toConsumableArray(posts), _toConsumableArray(json)));\n              });\n              setLoad(false);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(Container, {\n    children: [/*#__PURE__*/_jsx(Grid, {\n      spacing: 3,\n      container: true,\n      children: likedNews.map(function (post) {\n        return /*#__PURE__*/_jsx(Grid, {\n          item: true,\n          xs: 12,\n          md: 3,\n          sm: 6,\n          children: /*#__PURE__*/_jsx(NewsCard, {\n            post: post\n          })\n        }, post.url);\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      ref: ref,\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        paddingTop: \"15px\"\n      },\n      children: load ? /*#__PURE__*/_jsx(CircularProgress, {}) : \"\"\n    })]\n  });\n};\n\nexport default LikedNews;","map":null,"metadata":{},"sourceType":"module"}