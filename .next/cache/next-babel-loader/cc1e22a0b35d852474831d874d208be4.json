{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport { useStore } from \"mobx-store-provider\";\nimport { observer } from 'mobx-react';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nvar StyledMenu = withStyles({\n  paper: {\n    border: '1px solid #d3d4d5'\n  }\n})(function (props) {\n  return /*#__PURE__*/_jsx(Menu, _objectSpread({\n    elevation: 0,\n    getContentAnchorEl: null,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    }\n  }, props));\n});\nvar StyledMenuItem = withStyles(function (theme) {\n  return {\n    root: {\n      '&:focus': {// backgroundColor: theme.palette.primary.main,\n        // '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n        //   color: theme.palette.common.white,\n        // },\n      }\n    }\n  };\n})(MenuItem);\nexport default observer(function MenuCard(_ref) {\n  var post = _ref.post;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var _useStore = useStore(),\n      postsStore = _useStore.postsStore;\n\n  var handleClick = function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var pinPost = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              postsStore.togglePinned(post);\n              fetch('/api/news/pin', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json;charset=utf-8'\n                },\n                body: JSON.stringify({\n                  id: post._id\n                })\n              });\n              setAnchorEl(null);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function pinPost() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deletePost = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              postsStore.deletePost(post);\n              fetch('/api/news/delete', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json;charset=utf-8'\n                },\n                body: JSON.stringify({\n                  id: post._id\n                })\n              });\n              setAnchorEl(null);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function deletePost() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var toggleVisible = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              postsStore.togglePinned(post);\n              fetch('/api/news/pin', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json;charset=utf-8'\n                },\n                body: JSON.stringify({\n                  id: post._id\n                })\n              });\n              setAnchorEl(null);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function toggleVisible() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(IconButton, {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick,\n      children: /*#__PURE__*/_jsx(MoreVertIcon, {})\n    }), /*#__PURE__*/_jsxs(StyledMenu, {\n      id: \"customized-menu\",\n      anchorEl: anchorEl,\n      keepMounted: true,\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxs(StyledMenuItem, {\n        onClick: pinPost,\n        children: [!post.pinned ? /*#__PURE__*/_jsx(ListItemIcon, {\n          children: /*#__PURE__*/_jsx(AttachFileIcon, {\n            fontSize: \"small\"\n          })\n        }) : /*#__PURE__*/_jsx(ListItemIcon, {\n          children: /*#__PURE__*/_jsx(HighlightOffIcon, {\n            fontSize: \"small\"\n          })\n        }), /*#__PURE__*/_jsx(ListItemText, {\n          primary: post.pinned ? \"Открепить\" : \"Закрепить\"\n        })]\n      }), /*#__PURE__*/_jsxs(StyledMenuItem, {\n        onClick: deletePost,\n        children: [/*#__PURE__*/_jsx(ListItemIcon, {\n          children: /*#__PURE__*/_jsx(DeleteIcon, {\n            fontSize: \"small\"\n          })\n        }), /*#__PURE__*/_jsx(ListItemText, {\n          primary: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        })]\n      }), /*#__PURE__*/_jsxs(StyledMenuItem, {\n        children: [/*#__PURE__*/_jsx(ListItemIcon, {\n          children: /*#__PURE__*/_jsx(VisibilityOffIcon, {\n            fontSize: \"small\"\n          })\n        }), /*#__PURE__*/_jsx(ListItemText, {\n          primary: post.visible ? \"Скрыть\" : \"Показывать\"\n        })]\n      })]\n    })]\n  });\n});","map":null,"metadata":{},"sourceType":"module"}